# Current State — 2025-02-20 16:30 UTC

## Summary
Work is underway to introduce a dedicated Action Skills tab inside the Character view for BL4 saves. The tab now compiles and renders with the intended selectors and per-node editor controls, but the data shown in that tab is incorrect because the metadata sync routine produces duplicate canonical trees instead of reusing the real save data. Fixing the sync bug is prerequisite before the new UI can ship.

## What Already Works
- Metadata sync now creates canonical `Progress_<class>_Trunk_*` entries even for trees that are absent in the save, preventing in-game resets.
- Level/XP changes update the available BL4 points immediately and on initial load.
- Summary view shows global spent/available point totals and exposes Reset/Apply/Max bulk controls.
- `action_skills_prd.md` outlines the longer-term plan and out-of-scope items.

## Outstanding Tasks / Issues
1. **Action Skills sync regression** – `sync_bl4_skill_trees_with_metadata` now only augments trees that already exist in the save; it no longer creates canonical duplicates. The Action Skills tab should render the real save data. Verify totals and selection logic on real saves (e.g., `yaml/11.yaml`) after builds.
2. **Action tab message handling** – `Bl4ActionSkillTreeChanged`, `DetailTabChanged`, and the new selector states are wired in the UI but require careful propagation through reducers to avoid stale state. Verify they are included in every match arm that resets class/tree selection.
3. **Scrolling/layout** – The new Action Skills grid should be wrapped in a Scrollable or responsive layout to prevent overflow on narrow windows.
4. **Icons & styling** – Placeholder text is used for node cards. Need to integrate actual in-game icons once assets are available.
5. **Testing** – End-to-end validation (manual + `cargo` builds) still needs to be rerun after the sync fix to ensure serialization continues to work.

## Next Steps
- Validate `sync_bl4_skill_trees_with_metadata` on real saves now that it only augments existing trees (no synthesized duplicates), and confirm the Action Skills tab reflects the save data and totals match the Progression summary.
- Confirm the new tab row renders only in BL4 Classic mode and that switching tabs updates state predictably.
- Once the sync bug is fixed, perform manual verification using `yaml/11.yaml` (Harlowe) and other sample saves to ensure Action Skills edits persist in-game and UI totals match the Progression summary.
- Iterate on layout (add icons, tooltips) per the PRD.
